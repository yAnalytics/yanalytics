var CLIENT_ID = "122670225392-t8qh5ennnrqim2j7vrbc3vfa1td3sq5d.apps.googleusercontent.com";
var CLIENT_SECRET = "EE3T2nrELtAGGJIl9stXQq-2";
var CLIENT_SCOPES = 'https://www.googleapis.com/auth/yt-analytics.readonly';
var CLIENT_REDIRECT_URI = "http://localhost";

var api = {
	authorize : function() {
		var authUrl = "https://accounts.google.com/o/oauth2/auth?" + $.param({
			client_id: CLIENT_ID,
			redirect_uri: CLIENT_REDIRECT_URI,
			response_type: "code",
			scope: CLIENT_SCOPES
		});
		
		var authWindow = window.open(authUrl, '_blank', 'location=no,toolbar=no');
		
		$(authWindow).on('loadstart', function(e) {
			var url = e.originalEvent.url;
			var code = /\?code=(.+)$/.exec(url);
			var error = /\?error=(.+)$/.exec(url);
		});
	}
};


$(document).on('deviceready', function() {
    var $loginButton = $('#login a');
    var $loginStatus = $('#login p');

    $loginButton.on('click', function() {
        api.authorize();
    });
});